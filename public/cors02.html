<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <pre id="pre"></pre>

    <script>
      fetch('http://127.0.0.1:3000/try-session', {
        credentials: 'include',
      })
        //cors 跨網域要求api (ajax)時 會被阻擋
        // 同源必須http domain port 都要一樣
        // 在送cookie時必須用 credentials: 'include', 此時 domain相同才會有req cookie , port 可不同
        .then((r) => r.json())
        .then((obj) => {
          console.log(obj);
          document.querySelector('#pre').innerText = JSON.stringify(
            obj,
            null,
            4
          );
        });
    </script>
  </body>
</html>
